{% extends "base.html" %}

{% block content %}
<style>
    .cv-creator-section {
        background: linear-gradient(to bottom, #f5f9ff 0%, #ffffff 100%);
        padding: 3rem 0;
    }

    .cv-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .cv-title {
        font-weight: 800;
        color: #2d3748;
        font-size: 2.5rem;
        margin-bottom: 1rem;
    }

    .cv-title strong {
        color: #4361ee;
        font-weight: 800;
    }

    .cv-subtitle {
        color: #6c757d;
        font-size: 1.1rem;
        max-width: 700px;
        margin: 0 auto;
    }

    .cv-card {
        background: white;
        border-radius: 12px;
        padding: 2rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        margin-bottom: 1.5rem;
        border: 1px solid #e9ecef;
    }

    .section-title {
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 1.5rem;
        font-size: 1.25rem;
    }

    .form-label {
        font-weight: 500;
        color: #4a5568;
        margin-bottom: 0.5rem;
        font-size: 0.9rem;
    }

    .form-control, .form-select {
        border-radius: 8px;
        border: 1px solid #e9ecef;
        padding: 0.75rem 1rem;
        font-size: 0.9rem;
    }

    .form-control:focus, .form-select:focus {
        border-color: #4361ee;
        box-shadow: 0 0 0 0.2rem rgba(67, 97, 238, 0.15);
    }

    .btn-cv-primary {
        background: #4361ee;
        border: none;
        border-radius: 8px;
        padding: 0.75rem 1.5rem;
        font-weight: 600;
        color: white;
        font-size: 0.9rem;
    }

    .btn-cv-primary:hover {
        background: #3a56d4;
    }

    .remove-btn {
        color: #e53e3e;
        background: none;
        border: none;
        font-size: 1rem;
    }

    /* –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏ –¥–ª—è –ø—Ä–µ–≤—å—é */
    .cv-preview-container {
        position: sticky;
        top: 20px;
    }

    .cv-preview {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        border: 1px solid #e9ecef;
        height: 600px; /* –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –≤—ã—Å–æ—Ç–∞ */
        overflow: hidden; /* –£–±–∏—Ä–∞–µ–º —Å–∫—Ä–æ–ª–ª */
        transition: height 0.3s ease;
    }

    .preview-title {
        font-weight: 700;
        color: #2d3748;
        margin-bottom: 1.5rem;
        text-align: center;
    }

    .preview-content {
        overflow: hidden;
    }

    .badge-blue {
        background-color: #e0e7ff;
        color: #4361ee;
        font-weight: 500;
        padding: 0.35rem 0.65rem;
        border-radius: 50px;
        font-size: 0.75rem;
    }

    @media (max-width: 767.98px) {
        .cv-title {
            font-size: 2rem;
        }

        .cv-card {
            padding: 1.5rem;
        }

        .cv-preview-container {
            position: static;
            margin-top: 2rem;
        }
    }
</style>

<section class="cv-creator-section">
    <div class="container">
        <div class="cv-header">
            <h1 class="cv-title">{{ _('–°—Ç–≤–æ—Ä—ñ—Ç—å') }} <strong>{{ _('–∞–Ω–∫–µ—Ç—É –¥–ª—è —Ä–æ–±–æ—Ç–∏') }}</strong></h1>
            <p class="cv-subtitle">{{ _('–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –∞–Ω–∫–µ—Ç—É –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É —Ä–æ–±–æ—Ç–∏ –≤ –ü–æ–ª—å—â—ñ. –ú–∏ –¥–æ–ø–æ–º–æ–∂–µ–º–æ –∑–Ω–∞–π—Ç–∏ –≤–∞–º –Ω–∞–π–∫—Ä–∞—â—ñ –≤–∞–∫–∞–Ω—Å—ñ—ó.') }}</p>
        </div>

        <div class="row">
            <div class="col-lg-7">
                <form id="cvForm">
                    <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="cv-card">
                        <h3 class="section-title">üë§ {{ _('–û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è') }}</h3>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ _('–Ü–º\'—è*') }}</label>
                                <input type="text" class="form-control" id="firstName" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ _('–ü—Ä—ñ–∑–≤–∏—â–µ*') }}</label>
                                <input type="text" class="form-control" id="lastName" required>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ _('–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è*') }}</label>
                                <input type="date" class="form-control" id="birthDate" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ _('–°—Ç–∞—Ç—å*') }}</label>
                                <select class="form-select" id="gender" required>
                                    <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                    <option value="male">{{ _('–ß–æ–ª–æ–≤—ñ–∫') }}</option>
                                    <option value="female">{{ _('–ñ—ñ–Ω–∫–∞') }}</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∏–π —Ç–µ–ª–µ—Ñ–æ–Ω*') }}</label>
                            <input type="tel" class="form-control" id="phone" required>
                        </div>
                    </div>

                    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã -->
                    <div class="cv-card">
                        <h3 class="section-title">üíº {{ _('–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –¥–ª—è —Ä–æ–±–æ—Ç–∏') }}</h3>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ë–∞–∂–∞–Ω–∞ –ø–æ—Å–∞–¥–∞*') }}</label>
                            <select class="form-select" id="desiredPosition" required>
                                <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å –ø–æ—Å–∞–¥—É') }}</option>
                                <option value="construction">{{ _('–ë—É–¥—ñ–≤–µ–ª—å–Ω–∏–∫') }}</option>
                                <option value="driver">{{ _('–í–æ–¥—ñ–π') }}</option>
                                <option value="warehouse">{{ _('–°–∫–ª–∞–¥—Å—å–∫–∏–π –ø—Ä–∞—Ü—ñ–≤–Ω–∏–∫') }}</option>
                                <option value="cleaning">{{ _('–ü—Ä–∏–±–∏—Ä–∞–ª—å–Ω–∏–∫') }}</option>
                                <option value="factory">{{ _('–†–æ–±—ñ—Ç–Ω–∏–∫ –Ω–∞ –∑–∞–≤–æ–¥') }}</option>
                                <option value="agriculture">{{ _('–°—ñ–ª—å—Å—å–∫–µ –≥–æ—Å–ø–æ–¥–∞—Ä—Å—Ç–≤–æ') }}</option>
                                <option value="other">{{ _('–Ü–Ω—à–µ') }}</option>
                            </select>
                        </div>

                        <div class="mb-3" id="otherPositionContainer" style="display: none;">
                            <label class="form-label">{{ _('–í–∫–∞–∂—ñ—Ç—å –≤–∞—à—É —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ—Å—Ç—å') }}</label>
                            <input type="text" class="form-control" id="otherPosition">
                        </div>

                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ _('–î–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏*') }}</label>
                                <select class="form-select" id="experience" required>
                                    <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                    <option value="none">{{ _('–ë–µ–∑ –¥–æ—Å–≤—ñ–¥—É') }}</option>
                                    <option value="less1">{{ _('–ú–µ–Ω—à–µ 1 —Ä–æ–∫—É') }}</option>
                                    <option value="1-3">{{ _('1-3 —Ä–æ–∫–∏') }}</option>
                                    <option value="3-5">{{ _('3-5 —Ä–æ–∫—ñ–≤') }}</option>
                                    <option value="5plus">{{ _('–ë—ñ–ª—å—à–µ 5 —Ä–æ–∫—ñ–≤') }}</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label class="form-label">{{ _('–ó–∞—Ä–ø–ª–∞—Ç–Ω—ñ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è (PLN)*') }}</label>
                                <input type="number" class="form-control" id="salary" required>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ú—ñ—Å—Ç–æ, –¥–µ —Ö–æ—á–µ—Ç–µ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏*') }}</label>
                            <input type="text" class="form-control" id="city" required>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–Ñ –∂–∏—Ç–ª–æ –≤ –ü–æ–ª—å—â—ñ?*') }}</label>
                            <select class="form-select" id="hasHousing" required>
                                <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                <option value="yes">{{ _('–¢–∞–∫, —î —Å–≤–æ—î –∂–∏—Ç–ª–æ') }}</option>
                                <option value="no">{{ _('–ù—ñ, –ø–æ—Ç—Ä—ñ–±–Ω–µ –∂–∏—Ç–ª–æ') }}</option>
                                <option value="possible">{{ _('–ú–æ–∂—É –∑–Ω–∞–π—Ç–∏ —Å–∞–º') }}</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–¢–∏–ø —Ä–æ–±–æ—Ç–∏*') }}</label>
                            <select class="form-select" id="jobType" required>
                                <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                <option value="full">{{ _('–ü–æ–≤–Ω–∏–π –¥–µ–Ω—å') }}</option>
                                <option value="part">{{ _('–ß–∞—Å—Ç–∫–æ–≤–∞ –∑–∞–π–Ω—è—Ç—ñ—Å—Ç—å') }}</option>
                                <option value="shift">{{ _('–†–æ–±–æ—Ç–∞ –∑–∞ –∑–º—ñ–Ω–∞–º–∏') }}</option>
                                <option value="seasonal">{{ _('–°–µ–∑–æ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞') }}</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ß–∏ –≥–æ—Ç–æ–≤—ñ –¥–æ –ø–µ—Ä–µ—ó–∑–¥—É?*') }}</label>
                            <select class="form-select" id="relocation" required>
                                <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                <option value="yes">{{ _('–¢–∞–∫, –≥–æ—Ç–æ–≤–∏–π(–∞)') }}</option>
                                <option value="no">{{ _('–ù—ñ, –Ω–µ –≥–æ—Ç–æ–≤–∏–π(–∞)') }}</option>
                                <option value="depends">{{ _('–ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —É–º–æ–≤') }}</option>
                            </select>
                        </div>
                    </div>

                    <!-- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
                    <div class="cv-card">
                        <h3 class="section-title">‚ÑπÔ∏è {{ _('–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è') }}</h3>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ú–æ–≤–∏, —è–∫–∏–º–∏ –≤–æ–ª–æ–¥—ñ—î—Ç–µ*') }}</label>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="languagePolish">
                                <label class="form-check-label" for="languagePolish">{{ _('–ü–æ–ª—å—Å—å–∫–∞') }}</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="languageEnglish">
                                <label class="form-check-label" for="languageEnglish">{{ _('–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞') }}</label>
                            </div>
                            <div class="form-check mb-2">
                                <input class="form-check-input" type="checkbox" id="languageGerman">
                                <label class="form-check-label" for="languageGerman">{{ _('–ù—ñ–º–µ—Ü—å–∫–∞') }}</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ß–∏ —î –≤–æ–¥—ñ–π—Å—å–∫–µ –ø–æ—Å–≤—ñ–¥—á–µ–Ω–Ω—è?') }}</label>
                            <select class="form-select" id="hasDrivingLicense">
                                <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                <option value="none">{{ _('–ù–µ–º–∞—î') }}</option>
                                <option value="B">{{ _('–ö–∞—Ç–µ–≥–æ—Ä—ñ—è B') }}</option>
                                <option value="C">{{ _('–ö–∞—Ç–µ–≥–æ—Ä—ñ—è C') }}</option>
                                <option value="CE">{{ _('–ö–∞—Ç–µ–≥–æ—Ä—ñ—è CE') }}</option>
                                <option value="other">{{ _('–Ü–Ω—à–µ') }}</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Å–µ–±–µ') }}</label>
                            <textarea class="form-control" id="additionalInfo" rows="3" placeholder="{{ _('–ù–∞–ø—Ä–∏–∫–ª–∞–¥: –¥–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏, –Ω–∞–≤–∏—á–∫–∏, –æ—Å–æ–±–ª–∏–≤—ñ –≤–º—ñ–Ω–Ω—è') }}"></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">{{ _('–ö–æ–ª–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å—Ç—É–ø–∏—Ç–∏ –¥–æ —Ä–æ–±–æ—Ç–∏?*') }}</label>
                            <select class="form-select" id="startWork" required>
                                <option value="">{{ _('–û–±–µ—Ä—ñ—Ç—å') }}</option>
                                <option value="immediately">{{ _('–ù–µ–≥–∞–π–Ω–æ') }}</option>
                                <option value="1week">{{ _('–ß–µ—Ä–µ–∑ 1 —Ç–∏–∂–¥–µ–Ω—å') }}</option>
                                <option value="2weeks">{{ _('–ß–µ—Ä–µ–∑ 2 —Ç–∏–∂–Ω—ñ') }}</option>
                                <option value="1month">{{ _('–ß–µ—Ä–µ–∑ 1 –º—ñ—Å—è—Ü—å') }}</option>
                                <option value="discuss">{{ _('–ú–æ–∂–Ω–∞ –æ–±–≥–æ–≤–æ—Ä–∏—Ç–∏') }}</option>
                            </select>
                        </div>
                    </div>

                    <div class="text-center mt-4">
                        <button type="submit" class="btn btn-cv-primary btn-lg">
                            <i class="fas fa-paper-plane me-2"></i> {{ _('–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ –∞–Ω–∫–µ—Ç—É') }}
                        </button>
                    </div>
                </form>
            </div>

            <div class="col-lg-5">
                <div class="cv-preview-container">
                    <div class="cv-preview">
                        <h3 class="preview-title">{{ _('–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥') }}</h3>
                        <div class="preview-content" id="cvPreview">
                            <div class="text-center text-muted py-5">
                                <i class="fas fa-user-tie fa-3x mb-3"></i>
                                <p>{{ _('–í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ –∑\'—è–≤–∏—Ç—å—Å—è —Ç—É—Ç') }}</p>
                                <small class="text-muted">{{ _('–ó–∞–ø–æ–≤–Ω—ñ—Ç—å —Ñ–æ—Ä–º—É –ª—ñ–≤–æ—Ä—É—á, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –ø–µ—Ä–µ–≥–ª—è–¥') }}</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Show/hide other position field
        document.getElementById('desiredPosition').addEventListener('change', function() {
            const otherContainer = document.getElementById('otherPositionContainer');
            otherContainer.style.display = this.value === 'other' ? 'block' : 'none';
            updatePreview();
        });

        // Form submission
        document.getElementById('cvForm').addEventListener('submit', function(e) {
            e.preventDefault();

            // Simple validation
            const requiredFields = this.querySelectorAll('[required]');
            let isValid = true;

            requiredFields.forEach(field => {
                if (!field.value) {
                    field.classList.add('is-invalid');
                    isValid = false;
                } else {
                    field.classList.remove('is-invalid');
                }
            });

            if (!isValid) {
                alert('{{ _("–ë—É–¥—å –ª–∞—Å–∫–∞, –∑–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –æ–±–æ–≤\'—è–∑–∫–æ–≤—ñ –ø–æ–ª—è!") }}');
                return;
            }

            // Show success message
            alert('{{ _("–í–∞—à—É –∞–Ω–∫–µ—Ç—É —É—Å–ø—ñ—à–Ω–æ –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ! –ù–∞—à –º–µ–Ω–µ–¥–∂–µ—Ä –∑–≤\'—è–∂–µ—Ç—å—Å—è –∑ –≤–∞–º–∏ –Ω–∞–π–±–ª–∏–∂—á–∏–º —á–∞—Å–æ–º.") }}');

            // Here would be the actual form submission to server
            updatePreview();
        });

        // Update preview on form changes
        const formInputs = document.querySelectorAll('#cvForm input, #cvForm select, #cvForm textarea, #cvForm .form-check-input');
        formInputs.forEach(input => {
            input.addEventListener('input', function() {
                updatePreview();
                setTimeout(adjustPreviewHeight, 50);
            });
            input.addEventListener('change', function() {
                updatePreview();
                setTimeout(adjustPreviewHeight, 50);
            });
        });

        // Update preview function
        function updatePreview() {
            const firstName = document.getElementById('firstName').value || '{{ _("[–Ü–º\'—è]") }}';
            const lastName = document.getElementById('lastName').value || '{{ _("[–ü—Ä—ñ–∑–≤–∏—â–µ]") }}';
            const desiredPosition = document.getElementById('desiredPosition').value === 'other'
                ? document.getElementById('otherPosition').value
                : document.getElementById('desiredPosition').options[document.getElementById('desiredPosition').selectedIndex].text;

            // Languages
            const languages = [];
            if (document.getElementById('languagePolish').checked) languages.push('{{ _("–ü–æ–ª—å—Å—å–∫–∞") }}');
            if (document.getElementById('languageEnglish').checked) languages.push('{{ _("–ê–Ω–≥–ª—ñ–π—Å—å–∫–∞") }}');
            if (document.getElementById('languageGerman').checked) languages.push('{{ _("–ù—ñ–º–µ—Ü—å–∫–∞") }}');

            const previewHTML = `
                <div class="cv-preview-content">
                    <div class="text-center mb-4">
                        <div class="bg-light rounded-circle d-inline-flex align-items-center justify-content-center" style="width: 80px; height: 80px;">
                            <i class="fas fa-user fa-2x text-primary"></i>
                        </div>
                        <h4 class="mt-3 mb-1">${firstName} ${lastName}</h4>
                        <p class="text-muted mb-3">${desiredPosition || '{{ _("[–ü–æ—Å–∞–¥–∞]") }}'}</p>
                    </div>

                    <div class="mb-4">
                        <h5 class="d-flex align-items-center mb-3">
                            <i class="fas fa-info-circle text-primary me-2"></i>
                            <span>{{ _("–û—Å–Ω–æ–≤–Ω–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è") }}</span>
                        </h5>
                        <div class="row">
                            <div class="col-6 mb-2">
                                <small class="text-muted">{{ _("–¢–µ–ª–µ—Ñ–æ–Ω") }}</small>
                                <p>${document.getElementById('phone').value || '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                            </div>
                            <div class="col-6 mb-2">
                                <small class="text-muted">{{ _("–ú—ñ—Å—Ç–æ") }}</small>
                                <p>${document.getElementById('city').value || '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 mb-2">
                                <small class="text-muted">{{ _("–î–æ—Å–≤—ñ–¥") }}</small>
                                <p>${document.getElementById('experience').options[document.getElementById('experience').selectedIndex].text || '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                            </div>
                            <div class="col-6 mb-2">
                                <small class="text-muted">{{ _("–ó–∞—Ä–ø–ª–∞—Ç–∞") }}</small>
                                <p>${document.getElementById('salary').value ? document.getElementById('salary').value + ' PLN' : '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-6 mb-2">
                                <small class="text-muted">{{ _("–ú–æ–≤–∏") }}</small>
                                <p>${languages.length > 0 ? languages.join(', ') : '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                            </div>
                            <div class="col-6 mb-2">
                                <small class="text-muted">{{ _("–í–æ–¥—ñ–π—Å—å–∫—ñ –ø—Ä–∞–≤–∞") }}</small>
                                <p>${document.getElementById('hasDrivingLicense').options[document.getElementById('hasDrivingLicense').selectedIndex].text || '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                            </div>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5 class="d-flex align-items-center mb-3">
                            <i class="fas fa-briefcase text-primary me-2"></i>
                            <span>{{ _("–£–º–æ–≤–∏ —Ä–æ–±–æ—Ç–∏") }}</span>
                        </h5>
                        <div class="d-flex flex-wrap gap-2 mb-2">
                            <span class="badge-blue">${document.getElementById('jobType').options[document.getElementById('jobType').selectedIndex].text || '{{ _("–¢–∏–ø —Ä–æ–±–æ—Ç–∏") }}'}</span>
                            <span class="badge-blue">${document.getElementById('hasHousing').options[document.getElementById('hasHousing').selectedIndex].text || '{{ _("–ñ–∏—Ç–ª–æ") }}'}</span>
                            <span class="badge-blue">${document.getElementById('relocation').options[document.getElementById('relocation').selectedIndex].text || '{{ _("–ü–µ—Ä–µ—ó–∑–¥") }}'}</span>
                        </div>
                        <div>
                            <small class="text-muted">{{ _("–ú–æ–∂–µ –ø–æ—á–∞—Ç–∏") }}</small>
                            <p>${document.getElementById('startWork').options[document.getElementById('startWork').selectedIndex].text || '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                        </div>
                    </div>

                    <div class="mb-3">
                        <h5 class="d-flex align-items-center mb-3">
                            <i class="fas fa-comment-alt text-primary me-2"></i>
                            <span>{{ _("–î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è") }}</span>
                        </h5>
                        <p>${document.getElementById('additionalInfo').value || '{{ _("–ù–µ –≤–∫–∞–∑–∞–Ω–æ") }}'}</p>
                    </div>
                </div>
            `;

            document.getElementById('cvPreview').innerHTML = previewHTML;
            adjustPreviewHeight();
        }

        // Adjust preview height function
        function adjustPreviewHeight() {
            const previewContent = document.getElementById('cvPreview');
            const previewWrapper = document.querySelector('.cv-preview');

            if (!previewContent || !previewWrapper) return;

            // Get actual content height
            const contentHeight = previewContent.scrollHeight;

            // Calculate max allowed height (90% of viewport height)
            const maxHeight = window.innerHeight * 0.9;

            // Set wrapper height (content height + padding, but not more than maxHeight)
            previewWrapper.style.height = `${Math.min(contentHeight + 40, maxHeight)}px`;
        }

        // Initial setup
        updatePreview();
        window.addEventListener('resize', adjustPreviewHeight);
    });
</script>
{% endblock %}